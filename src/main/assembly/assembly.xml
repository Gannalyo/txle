<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Copyright (c) 2018-2019 ActionTech.
  ~ based on code by ServiceComb Pack CopyrightHolder Copyright (C) 2018,
  ~ License: http://www.apache.org/licenses/LICENSE-2.0 Apache License 2.0 or higher.
  -->

<assembly
	xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/2.0.0"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/2.0.0 http://maven.apache.org/xsd/assembly-2.0.0.xsd">
	<id>package</id>
	<formats>
		<!--压缩文件类型：zip、tar、tar.gz/tgz、tar.bz2/tbz2、jar、dir、war -->
		<format>tar.gz</format>
	</formats>
	<includeBaseDirectory>true</includeBaseDirectory>
	<fileSets>
		<!-- 需要包含的文件与输出的路径 -->
		<fileSet>
			<!-- alpha打包文件信息 -->
			<directory>alpha/alpha-server/target/alpha-server-${version}</directory>
			<excludes>
				<exclude>/bin/txle</exclude>
			</excludes>
			<outputDirectory></outputDirectory>
		</fileSet>
		<fileSet>
			<!-- alpha打包文件信息，为txle文件赋值可执行权限 -->
			<directory>alpha/alpha-server/target/alpha-server-${version}/bin</directory>
			<outputDirectory>/bin</outputDirectory>
			<includes>
				<include>txle</include>
			</includes>
			<fileMode>0755</fileMode>
		</fileSet>
	</fileSets>
	<files>
		<!-- 打包时把LICENSE文件放在根目录 -->
		<file>
			<source>LICENSE</source>
		</file>
		<file>
			<source>README.md</source>
		</file>
		<!-- omega基础jar包 -->
		<file>
			<source>omega/omega-spring-starter/target/txle-client-${version}.jar</source>
			<outputDirectory>/client</outputDirectory>
		</file>
		<file>
			<source>omega/omega-spring-tx/target/txle-spring-tx-${version}.jar</source>
			<outputDirectory>/client</outputDirectory>
		</file>
		<file>
			<source>omega/omega-transaction/target/txle-transaction-${version}.jar</source>
			<outputDirectory>/client</outputDirectory>
		</file>
		<file>
			<source>omega/omega-connector/omega-connector-grpc/target/txle-connector-grpc-${version}.jar</source>
			<outputDirectory>/client</outputDirectory>
		</file>
		<file>
			<source>omega/omega-context/target/txle-context-${version}.jar</source>
			<outputDirectory>/client</outputDirectory>
		</file>
		<file>
			<source>omega/omega-format/target/txle-format-${version}.jar</source>
			<outputDirectory>/client</outputDirectory>
		</file>

		<!-- omega common和grpc jar包 -->
		<file>
			<source>pack-common/target/txle-common-${version}.jar</source>
			<outputDirectory>/client</outputDirectory>
		</file>
		<file>
			<source>pack-contracts/pack-contract-grpc/target/txle-contract-grpc-${version}.jar</source>
			<outputDirectory>/client</outputDirectory>
		</file>
		<file>
			<source>saga-persistence/saga-persistence-jpa/target/txle-persistence-jpa-${version}.jar</source>
			<outputDirectory>/client</outputDirectory>
		</file>

		<!-- omega 自动补偿、sql拦截、对外api jar包 -->
		<file>
			<source>omega/omega-autocompensation/target/txle-autocompensation-${version}.jar</source>
			<outputDirectory>/client</outputDirectory>
		</file>
		<file>
			<source>omega/omega-p6spy/target/txle-p6spy-${version}.jar</source>
			<outputDirectory>/client</outputDirectory>
		</file>

		<!-- omega 四种通信 jar包 -->
		<file>
			<source>omega/omega-transport/omega-transport-dubbo/target/txle-transport-dubbo-${version}.jar</source>
			<outputDirectory>/client</outputDirectory>
		</file>
		<file>
			<source>omega/omega-transport/omega-transport-feign/target/txle-transport-feign-${version}.jar</source>
			<outputDirectory>/client</outputDirectory>
		</file>
		<file>
			<source>omega/omega-transport/omega-transport-resttemplate/target/txle-transport-resttemplate-${version}.jar</source>
			<outputDirectory>/client</outputDirectory>
		</file>
		<file>
			<source>omega/omega-transport/omega-transport-servicecomb/target/txle-transport-servicecomb-${version}.jar</source>
			<outputDirectory>/client</outputDirectory>
		</file>
	</files>
</assembly>